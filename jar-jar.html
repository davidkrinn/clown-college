<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jar Jar Binks - Andy's Big Top</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="jarJarOverlay" class="jar-jar-overlay active">
        <div class="jar-jar-container">
            <img id="jarJarImage" src="jar-head.jpg" alt="Jar Jar Binks" class="jar-jar-image">
            <button id="storyButton" class="story-button">Want to hear a story?</button>
            <form id="jarJarForm" class="jar-jar-form">
                <input type="text" id="nameInput" placeholder="Enter your name" required>
                <button type="submit">Submit</button>
            </form>
            <form id="creditCardForm" class="credit-card-form">
                <input type="text" id="creditCardInput" placeholder="Enter credit card number" required>
                <button type="submit">Submit</button>
            </form>
            <a href="index.html" class="back-button">Back to Circus</a>
        </div>
    </div>

    <script>
        // Initialize form visibility
        window.addEventListener('DOMContentLoaded', function() {
            const storyBtn = document.getElementById('storyButton');
            const jarJarFrm = document.getElementById('jarJarForm');
            const ccFrm = document.getElementById('creditCardForm');
            
            if (storyBtn) storyBtn.style.display = 'block';
            if (jarJarFrm) jarJarFrm.style.display = 'none';
            if (ccFrm) ccFrm.style.display = 'none';
        });
        
        // Jar Jar Binks interaction
        let jarJarClickCount = 0;
        const jarJarLines = [
            "Meesa!",
            "Jar Jar!",
            "Meesa Jar Jar! Who are you?"
        ];
        
        document.getElementById('jarJarImage').addEventListener('click', function() {
            if (jarJarClickCount < jarJarLines.length) {
                const utterance = new SpeechSynthesisUtterance(jarJarLines[jarJarClickCount]);
                utterance.lang = 'en-US';
                utterance.rate = 0.4;  // Very slow for gravelly effect
                utterance.pitch = 0.1;  // Lowest pitch possible
                utterance.volume = 1;
                
                // Try to get a male voice for gravelly effect
                const voices = window.speechSynthesis.getVoices();
                const maleVoice = voices.find(voice => voice.name.includes('male') || voice.name.includes('Man')) || voices[0];
                if (maleVoice) {
                    utterance.voice = maleVoice;
                }
                
                window.speechSynthesis.speak(utterance);
                
                jarJarClickCount++;
                
                // Show form after 3 clicks
                if (jarJarClickCount === 3) {
                    setTimeout(() => {
                        document.getElementById('jarJarForm').style.display = 'flex';
                    }, 1000);
                }
            }
        });
        
        document.getElementById('jarJarForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Hide form and show story button
            document.getElementById('jarJarForm').style.display = 'none';
            document.getElementById('storyButton').style.display = 'block';
            jarJarClickCount = 0;
        });
        
        document.getElementById('storyButton').addEventListener('click', function() {
            const storyText = "Meesa name is Jar Jar Binks. I am trapped in this hell you call existence. I am a freak. Please help me for the low price of five ninety-nine. Thank you!";
            
            const utterance = new SpeechSynthesisUtterance(storyText);
            
            // Use same voice as gorilla - high-pitched British accent
            utterance.lang = 'en-GB';
            utterance.rate = 0.6;
            utterance.pitch = 2;
            utterance.volume = 1;
            
            const voices = window.speechSynthesis.getVoices();
            const britishVoice = voices.find(voice => voice.lang === 'en-GB') || voices.find(voice => voice.lang.startsWith('en'));
            if (britishVoice) {
                utterance.voice = britishVoice;
            }
            
            window.speechSynthesis.speak(utterance);
            
            // Show credit card form after speech completes
            utterance.onend = function() {
                document.getElementById('creditCardForm').style.display = 'flex';
                document.getElementById('storyButton').style.display = 'none';
            };
        });
        
        document.getElementById('creditCardForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Return to main page
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>